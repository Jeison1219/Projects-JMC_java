<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Gestión de Proyectos - Project-JMC</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    :root {
      --nintendo-red: #E60012;
      --purple-gradient: linear-gradient(to right, #6a11cb, #2575fc);
      --gray-bg: #f4f6f9;
    }

    body {
      background-color: var(--gray-bg);
      font-family: 'Segoe UI', sans-serif;
    }

    .navbar {
      background-color: var(--nintendo-red);
    }

    .navbar-brand, .nav-link {
      color: white !important;
      font-weight: 500;
    }

    .btn-logout {
      border: 1px solid #fff;
      color: white;
      background: transparent;
      border-radius: 6px;
      padding: 6px 12px;
    }

    .btn-logout:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .main-container {
      max-width: 1200px;
      margin: 40px auto;
      background: #fff;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }

    .header-bar {
      background: var(--purple-gradient);
      color: white;
      padding: 20px;
      border-radius: 12px 12px 0 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .header-bar h4 {
      margin: 0;
    }

    .btn-tareas {
      background: white;
      color: #333;
      border-radius: 30px;
      font-weight: 500;
    }

    .filter-row select,
    .filter-row input[type="date"] {
      border-radius: 8px;
    }

    .btn-red {
      background-color: #dc3545;
      color: white;
      font-weight: 500;
    }

    .btn-red:hover {
      background-color: #c82333;
    }

    .no-proyectos {
      text-align: center;
      padding: 60px 30px;
      border: 2px solid #007bff;
      border-radius: 12px;
      background: #eaf0ff;
      color: #007bff;
      margin-top: 20px;
    }

    .no-proyectos i {
      font-size: 36px;
    }

    .table th {
      color: var(--nintendo-red);
      font-weight: bold;
    }
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark px-4">
  <a class="navbar-brand" href="/dashboard"><i class="fas fa-gamepad me-2"></i> Projects-JMC</a>
  <div class="collapse navbar-collapse">
    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      <li class="nav-item"><a class="nav-link" href="/dashboard">Home</a></li>
      <li class="nav-item"><a class="nav-link active" href="/proyectos">Proyectos</a></li>
      <li class="nav-item"><a class="nav-link" href="/tareas">Tareas</a></li>
      <li class="nav-item"><a class="nav-link" href="/usuarios">Usuarios</a></li>
    </ul>
    <form th:action="@{/logout}" method="post" class="d-flex">
      <button type="submit" class="btn btn-logout">Cerrar sesión</button>
    </form>
  </div>
</nav>

<!-- CONTENIDO -->
<div class="main-container">
  <div class="header-bar">
    <h4><i class="fas fa-network-wired me-2"></i> Gestión de Proyectos</h4>
    <a href="/tareas" class="btn btn-light btn-sm btn-tareas"><i class="fas fa-tasks"></i> Ir a Tareas</a>
  </div>

  <!-- FILTROS -->
  <form class="row g-3 my-3 filter-row">
    <div class="col-md-3">
      <select class="form-select" name="nombre">
        <option selected>Todos los proyectos</option>
      </select>
    </div>
    <div class="col-md-2">
      <select class="form-select" name="estado">
        <option selected>Todos</option>
        <option>Activo</option>
        <option>Finalizado</option>
      </select>
    </div>
    <div class="col-md-2">
      <input type="date" class="form-control" name="fechaInicio">
    </div>
    <div class="col-md-2">
      <input type="date" class="form-control" name="fechaFin">
    </div>
    <div class="col-md-3 d-flex gap-2">
      <button type="submit" class="btn btn-primary w-100"><i class="fas fa-filter"></i> Filtrar</button>
      <a href="/proyectos" class="btn btn-outline-secondary w-100"><i class="fas fa-redo"></i> Limpiar</a>
    </div>
  </form>

  <!-- PDF -->
  <div class="mb-3 text-center">
    <a href="#" class="btn btn-red w-100"><i class="fas fa-file-pdf"></i> Exportar PDF</a>
  </div>

  <!-- LISTADO -->
  <div th:if="${#lists.isEmpty(proyectos)}" class="no-proyectos">
    <i class="fas fa-folder-open mb-2 d-block"></i>
    <h5>No se encontraron proyectos</h5>
    <a href="/proyectos/nuevo" class="btn btn-primary mt-3"><i class="fas fa-plus-circle"></i> Crear Proyecto</a>
  </div>

  <div th:if="${not #lists.isEmpty(proyectos)}">
    <table class="table table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>Nombre</th>
          <th>Fechas</th>
          <th>Miembros</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="p : ${proyectos}">
          <td th:text="${p.nombre}">Nombre</td>
          <td>
            <span th:text="${p.fechaInicio}">Inicio</span> - <span th:text="${p.fechaFin}">Fin</span>
          </td>
          <td th:text="${p.miembros}">Miembros</td>
          <td>
            <div class="btn-group" role="group">
              <a th:href="@{/proyectos/detalles/{id}(id=${p.id})}" class="btn btn-info btn-sm" title="Ver Detalles">
                <i class="fas fa-eye"></i>
              </a>
              <a th:href="@{/proyectos/editar/{id}(id=${p.id})}" class="btn btn-warning btn-sm" title="Editar">
                <i class="fas fa-edit"></i>
              </a>
              <form th:action="@{/proyectos/eliminar/{id}(id=${p.id})}" method="post" class="d-inline">
                <button type="submit" class="btn btn-danger btn-sm" title="Eliminar"
                        onclick="return confirm('¿Eliminar este proyecto?')">
                  <i class="fas fa-trash-alt"></i>
                </button>
              </form>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

</body>
</html>
